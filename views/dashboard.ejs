<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=account_circle" />
  <link rel="stylesheet" type="text/css" href="/css/headerStyle.css">
  <title>Dashboard</title>
  <style>
    *{
      /* outline: 1px solid red; */
    }
    body{
      min-height: 100vh;
      background: linear-gradient(to bottom, #dee9ff, #FFFFFF);
      font-family: 'Montserrat',sans-serif;
    }
    .section{
      width: 90vw;
      margin: 0 auto;
      display: flex;
      gap: 1rem;
    }
    .profile-container{
      min-width: 20%;
      width: fit-content;
      padding: 1rem;
    }
    .profile {
        margin-bottom: 0.5rem;
      }
    .profile span{
      display: flex;
      width: max-content;
      /* justify-content: center; */
      align-items: center;
      font-size: 7rem;
    }
    .line{
      width: 2px;
      background-color: rgb(28, 21, 79);
      height: auto;
    }
    .profile_content{
      width: max-content;
      margin-left: 3rem;
      padding-bottom: 1rem;
    }
    .users{
      width: max-content;
    }
    .nameD{
      font-size: 1.5rem;
      font-weight: 500;
    }
    .usernameD{
      font-size: 1.2rem;
      color: blue;
      font-weight: 600;
    }
    .user , .admin{
      font-weight: 500;
      font-size: 1.4rem;
    }
    .user span, .admin span {
      color: red;
    }
    .users p , .recipeNames p{
      font-size: 1.9rem;
      font-weight: 600;
      margin-bottom: 1rem;

    }
    .userName_list{
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .userName_list li{
      font-family: 'Poppins',sans-serif;
      color: rgb(124, 30, 30);
      span{
        font-weight: 600;
        color: rgb(0, 0, 78);
      }
    }
    .recipeNames_list{
      display: flex;
      flex-direction: column;
      color: rgb(166, 22, 0);
      gap: 0.8rem;
      span{
        font-weight: 600;
        color: rgb(0, 0, 78);
      }
      li{
        padding: 0.2rem;
        width: 100%;
        border-bottom: 1px solid black;
        border-style: groove;
      }
    }
    li .user_name{
      font-size: 0.9rem;
      margin-left: 1rem;
      opacity: 0.7;
    }
    .recipeNames_list div{
      display: flex;
      /* gap: 1rem; */
    }
    .recipeNames_list a{
      border: 1px solid rgb(49, 15, 15);
      background-color: rgb(244, 25, 25);
      padding: 0.2rem 0.5rem;
      font-weight: 500;
      color: white;
      text-decoration: none;
      display: flex;
      align-items: center;
      /* border-radius: 50%; */
      transition: all 0.5s ease-in-out;
    }
    .recipeNames_list a:hover{
      background-color: rgb(26, 26, 26);
      transform: rotate3d(1,0,0,180deg);
    }
    .user_Name , .email , .phone{
      font-size: 1.2rem;
      font-weight: 500;
      margin-bottom: 0.6rem;
      span{
        font-weight: 400;
        color: rgb(0, 0, 210);
      }
    }
    .editDetails{
      position: relative;
      font-size: 1.2rem;
      color: black;
      /* border: 1px solid; */
      width: fit-content;
      padding: 0.1rem 0.5rem;
      cursor: pointer;
      border-radius: 3px;
      box-shadow: 2px 2px 5px rgb(102, 102, 102);
      background-color: rgb(245, 249, 255);
      transition: all 0.3s ease-in-out;
    }
    .editDetails:hover{
      color: white;
      transform: translateY(-5px);
      /* border: 1px solid; */
      background-color: rgb(56, 56, 56);
    }
    .editForm{
      visibility: hidden;
      opacity: 0;
      position: relative;
      transform: translateX(-15px);
      transition: all 0.5s ease-in-out;
    }
    .editForm input{
        font-size: 1.2rem;
        padding: 0.1rem 0.3rem;
        border-radius: 2px;
        margin-bottom: 0.5rem;
    }
    .editForm button{
      margin-top: 0.3rem;
      background-color: rgb(0, 0, 145);
      color: white;
      border: 1px solid;
      border-radius: 5px;
      padding: 0.2rem 0.5rem;
      font-size: 1rem;
      cursor: pointer;
    }
    @media (max-width:700px) {
      .section{
        width: 92vw;
      }
    }
    @media (max-width:625px) {
      .profile_content{
        margin-left: 1rem;
      }
      .recipeNames_list div{
        max-width: 90%;
      }
    }
    @media (max-width:525px) {
      .section {
        gap: 0.7rem;
        width: 94vw;
      }
      
      .profile_content{
        margin-left: 0;
      }
      .profile-container{
        padding: 0.5rem;
      }
    }
    @media (max-width:425px) {
      .recipeNames_list div{
        max-width: 100%;
      }
      .profile span{
        border: 1px solid;
        padding: 0.15rem;
        border-radius: 2px;
        justify-content: center;
      }
    }
    @media (max-width:860px) {
      .admin span , .user span{
        font-size: 1.4rem;
      }
    }
  </style>
</head>
<body>
  <%- include('./partials/header') %>
  <br><br><br>
  <div class="section">
    <div class="profile-container">
      <div class="profile"><li>
        <span class="material-symbols-outlined profileBtn_drop">account_circle</span>
      </li></div>
      <div class="nameD"><%= name%></div>
      <div class="usernameD">@<%=username%></div>
      <br>
      <% if(name=='admin'){ %>
        <div class="admin">Role : <span>Admin</span></div>
      <% }
      else { %>
          <div class="user">Role : <span>User</span></div>
        <% }
      %>
    </div>
    <div class="line"></div>
    <div class="profile_content">
      <% if(name=='admin') { %>
          <div class="users">
            <p>Users :-</p>
            <ul class="userName_list">
            <% names.forEach(userName=>{ %>
              <li><span>-:</span>  <%=userName.name%></li>
            <% }) %>
            </ul>
          </div>
          <br><br>
          <div class="recipeNames">
            <p>Recipe Names :-</p>
            <ul class="recipeNames_list">
            <% recipeNames.forEach(recipe=>{ %>
              <div><li><span>:|- </span>  <%=recipe.title%> <span class="user_name">-@<%=recipe.username%></span></li><a href="/delete/<%=recipe._id%>">D</a></div>
            <% }) %>
            </ul>
          </div>
        <% }
        else { %>
            <div class="userDetails">
              <div class="user_Name">Name :- <span><%=name%></span></div>
              <div class="email">Email :- <span><%=email%></span></div>
              <div class="phone">Phone No. :- <span><%=phone%></span></div>
            </div>
            <br><br><br>
            <div class="editDetails">Edit Details</div>
            <br><br>
            <form action="/editDetails" method="post" class="editForm">
              <input type="text" value="<%=name%>" name="name">
              <br>
              <input type="email" value="<%=email%>" name="email">
              <br>
              <input type="text" value="<%=phone%>" name="phone" minlength="10" maxlength="10">
              <br>
              <button type="submit">Submit</button>
            </form>
          <% }
      %>
    </div>
  </div>
  <br><br>
  <script>
    const profile = document.querySelector('.profileBtn');
    profile.addEventListener('click', () => {
      const profilecard = document.querySelector('.profile-card');
      profilecard.style.display = profilecard.style.display === 'none' || profilecard.style.display === '' ? 'flex' : 'none';
    });
    const profileDrop = document.querySelector('.profileBtn_drop');
    profileDrop.addEventListener('click', () => {
      const profilecardDrop = document.querySelector('.profile-cardDrop');
      profilecardDrop.style.display = profilecardDrop.style.display === 'none' || profilecardDrop.style.display === '' ? 'flex' : 'none';
    });
    const drop = document.querySelector('.drop_menu');
    drop.addEventListener('click',()=>{
      const dropdown = document.querySelector('.dropdown');
      if (dropdown.classList.contains('open')) {
      dropdown.classList.remove('open');
      dropdown.classList.add('closed');
      } else {
      dropdown.classList.remove('closed');
      dropdown.classList.add('open');
      }
    })

    document.querySelector('.editDetails').addEventListener('click',()=>{
      const editForm = document.querySelector('.editForm');
      if(editForm.style.visibility === 'visible') {
        editForm.style.visibility = 'hidden';
        editForm.style.opacity = 0;
        editForm.style.transform = 'translateX(-15px)';
      }
      else {
        editForm.style.visibility = 'visible';
        editForm.style.opacity = 1;
        editForm.style.transform = 'translateX(0px)';
      }
    })
  </script>
</body>
</html>